<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
    <div id="app">
        <h1>{{characterSheet.name}} {{characterSheet.surname}}</h1>
        <div v-for="skill in characterSheet.skills" :key="skill.name">
            <skill :name="skill.name" :stars-number="skill.starsNumber" :next-to-learn="skill.nextToLearn"></skill>
        </div>
    </div>
    <script>
        Vue.component('skill', {
            template: '<div>{{name}} {{stars}}</div>',
            props: {
                "name": { type: String, default: "" },
                "starsNumber": { type: Number, default: 0 },
                "nextToLearn": { type: String, default: "" }
            },
            computed: {
                stars: function () {
                    return this.stars(this.starsNumber);
                }
            },
            methods: {
                stars(amount, of = 10, amountIcon = "⭐", ofIcon = "◼") {
                    return amountIcon.repeat(amount).padEnd(of, ofIcon)
                }
            }
        })
    </script>
    <script>

        var app = new Vue({
            el: '#app',
            data: {
                characterSheet: {
                    name: "",
                    surname: "",
                    "skills": [
                        {
                            "name": "",
                            "stars": 0,
                            "nextToLearn": ""
                        }
                    ]
                }
            },
            created() {
                var self = this;
                fetch("fiche_perso.json")
                    .then((response) => {

                        return response.json();
                    })
                    .then((jsonData) => {
                        self.$set(self, "characterSheet", jsonData)
                    })
            }

        })
    </script>
</body>

</html>